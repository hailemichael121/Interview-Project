@baseUrl = http://localhost:3000
@frontendUrl = http://localhost:3001
@contentType = application/json

###
# DYNAMIC VARIABLES (captured from test responses)
###

@authToken =9dgzPySwIaZSZg19Q6T9H8KlcKT4Ip1g
@userId =9dgzPySwIaZSZg19Q6T9H8KlcKT4Ip1g
@organizationId =cmim923560000tu66aytr29ej
@outlineId =cmim95avd0002tu66w54n514q
@inviteToken =bjmajlxltamim9pycw
@invitedEmail =yihunaashe@gmail.com
@memberUserId =cmima4wn400094x6666xwhz3g

###
# 0. HEALTH CHECKS
###

GET {{baseUrl}}/
 
###
GET {{baseUrl}}/api/auth/session
Origin: {{frontendUrl}}
Cookie: better-auth.session_token={{authToken}}
Content-Type: {{contentType}}

###
# 1. AUTH — SIGN IN (fixed test account)
###

# @name signIn
POST {{baseUrl}}/api/auth/sign-in/email
Origin: {{frontendUrl}}
Content-Type: {{contentType}}

{
  "email": "testuser_1764535688@example.com",
  "password": "password123"
}

###
# 1.1 AUTH — SIGN UP (new test account)
###
# @name signUp
POST {{baseUrl}}/api/auth/sign-up/email
Origin: {{frontendUrl}}
Content-Type: {{contentType}}

{
  "name": "yihun Shekuri",
  "email": "yihunaashe@gmail.com",
  "password": "password123"
}

###
# 1.2 AUTH — SIGN IN (new test account)
###
# @name signIn
POST {{baseUrl}}/api/auth/sign-in/email
Origin: {{frontendUrl}}
Content-Type: {{contentType}}

{
  "email": "yihunaashe@gmail.com",
  "password": "password123"
}

###
# 2. AUTH — GET SESSION (authenticated)
###

GET {{baseUrl}}/api/auth/session
Origin: {{frontendUrl}}
Cookie: better-auth.session_token={{authToken}}

###
# 3. ORGANIZATION — CREATE
###

# @name createOrganization
POST {{baseUrl}}/api/organization/create
Origin: {{frontendUrl}}
Cookie: better-auth.session_token={{authToken}}
Content-Type: {{contentType}}

{
  "name": "Sharuk Khan Organization",        
  "slug": "sharuk-khan-organization"         
}
 
###
# 4. ORGANIZATION — LIST USER ORGANIZATIONS
###

GET {{baseUrl}}/api/organization
Origin: {{frontendUrl}}
Cookie: better-auth.session_token={{authToken}}

###
# 5. OUTLINES — CREATE
###

# @name createOutline
POST {{baseUrl}}/api/outlines
Origin: {{frontendUrl}}
Cookie: better-auth.session_token={{authToken}}
Content-Type: {{contentType}}

{
  "header": "Sharuk Khan 2",       
  "sectionType": "TECHNICAL_APPROACH",   
  "status": "IN_PROGRESS",        
  "target": 100,         
  "limit": 230,        
  "reviewerId": null    
}
###TABLE_OF_CONTENTS, EXECUTIVE_SUMMARY, TECHNICAL_APPROACH, DESIGN, CAPABILITIES, FOCUS_DOCUMENT, NARRATIVE

###
# 6. OUTLINES — LIST
###

GET {{baseUrl}}/api/outlines
Origin: {{frontendUrl}}
Cookie: better-auth.session_token={{authToken}}

###
# 7. OUTLINES — GET ONE
###

GET {{baseUrl}}/api/outlines/{{outlineId}}
Origin: {{frontendUrl}}
Cookie: better-auth.session_token={{authToken}}

###
# 8. OUTLINES — UPDATE
###

PUT {{baseUrl}}/api/outlines/{{outlineId}}
Origin: {{frontendUrl}}
Cookie: better-auth.session_token={{authToken}}
Content-Type: {{contentType}}

{
  "header": "Upgrade: Sharuk Khan 2",        
  "status": "COMPLETED",        
  "target": 100,         
  "limit": 230           
}

###
# 9. TEAM — LIST MEMBERS
###

GET {{baseUrl}}/api/organization/{{organizationId}}/members
Cookie: better-auth.session_token={{authToken}}
Origin: {{frontendUrl}}
###
# 10. TEAM — INVITE MEMBER
###

# @name inviteMember
POST {{baseUrl}}/api/organization/{{organizationId}}/invite
Cookie: better-auth.session_token={{authToken}}
Content-Type: application/json
Origin: {{frontendUrl}}

{
  "email": "yihunaashe@gmail.com",
  "role": "MEMBER"
}

 
###
# 11. ORGANIZATION — ACCEPT INVITE (simulated)
###

# @name acceptInvite
POST {{baseUrl}}/api/organization/accept-invite/{{inviteToken}}
Origin: {{frontendUrl}}
Content-Type: {{contentType}}

{
  "email": "yihunaashe@gmail.com"
}

###
# 12. ORGANIZATION — REVOKE MEMBER
###

POST {{baseUrl}}/api/organization/{{organizationId}}/revoke
Origin: {{frontendUrl}}
Cookie: better-auth.session_token={{authToken}}
Content-Type: {{contentType}}

{
  "memberId": "{{memberUserId}}" 
}

###
# 13. USER — GET PROFILE
###

GET {{baseUrl}}/users/me
Origin: {{frontendUrl}}
Cookie: better-auth.session_token={{authToken}}

###
# 14. USER — UPDATE PROFILE
###

PUT {{baseUrl}}/users/profile
Origin: {{frontendUrl}}
Cookie: better-auth.session_token={{authToken}}
Content-Type: {{contentType}}

{
  "name": "",                
  "image": ""              
}

###
# 15. USER — LIST ALL USERS
###

GET {{baseUrl}}/users
Origin: {{frontendUrl}}
Cookie: better-auth.session_token={{authToken}}

###
# 16. OUTLINES — DELETE
###

DELETE {{baseUrl}}/api/outlines/{{outlineId}}
Origin: {{frontendUrl}}
Cookie: better-auth.session_token={{authToken}}